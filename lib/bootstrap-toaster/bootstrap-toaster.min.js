/**
 * Copyright (c) 2021 Peyton Gasink
 * Distributed under MIT License.
 *
 * This file contains all the necessary scripting to programmatically
 * generate Bootstrap toasts. It first inserts a container at the bottom
 * of the DOM, then fills a toast template and inserts it into the container.
 *
 * Configuration options are also provided for toast placement, light & dark themes,
 * and the maximum number of toasts allowed on the page at a given time.
 */
const TOAST_CONTAINER=document.createElement("div");TOAST_CONTAINER.id="toastContainer",TOAST_CONTAINER.className="toast-container position-fixed top-0 end-0",TOAST_CONTAINER.setAttribute("aria-live","polite"),document.body.appendChild(TOAST_CONTAINER);const TOAST_TEMPLATE=document.createElement("div");var TOAST_STATUS,TOAST_PLACEMENT,TOAST_THEME,TOAST_TIMERS;TOAST_TEMPLATE.className="toast",TOAST_TEMPLATE.setAttribute("role","status"),TOAST_TEMPLATE.setAttribute("aria-live","polite"),TOAST_TEMPLATE.setAttribute("aria-atomic","true"),TOAST_TEMPLATE.setAttribute("data-bs-autohide","false"),TOAST_TEMPLATE.innerHTML='\n <div class="toast-header">\n <span class="status-icon bi me-2" aria-hidden="true"></span>\n <strong class="me-auto toast-title"></strong>\n <small class="timer" aria-hidden="true"></small>\n <button type="button" class="btn-close ms-2" data-bs-dismiss="toast" aria-label="Close"></button>\n </div>\n <div class="toast-body"></div>',function(t){t[t.SUCCESS=1]="SUCCESS",t[t.DANGER=2]="DANGER",t[t.WARNING=3]="WARNING",t[t.INFO=4]="INFO"}(TOAST_STATUS||(TOAST_STATUS={})),function(t){t[t.TOP_LEFT=1]="TOP_LEFT",t[t.TOP_CENTER=2]="TOP_CENTER",t[t.TOP_RIGHT=3]="TOP_RIGHT",t[t.MIDDLE_LEFT=4]="MIDDLE_LEFT",t[t.MIDDLE_CENTER=5]="MIDDLE_CENTER",t[t.MIDDLE_RIGHT=6]="MIDDLE_RIGHT",t[t.BOTTOM_LEFT=7]="BOTTOM_LEFT",t[t.BOTTOM_CENTER=8]="BOTTOM_CENTER",t[t.BOTTOM_RIGHT=9]="BOTTOM_RIGHT"}(TOAST_PLACEMENT||(TOAST_PLACEMENT={})),function(t){t[t.LIGHT=1]="LIGHT",t[t.DARK=2]="DARK"}(TOAST_THEME||(TOAST_THEME={})),function(t){t[t.DISABLED=0]="DISABLED",t[t.ELAPSED=1]="ELAPSED",t[t.COUNTDOWN=2]="COUNTDOWN"}(TOAST_TIMERS||(TOAST_TIMERS={}));class Toast{static configure(t){this.setMaxCount(null==t?void 0:t.maxToasts),this.setPlacement(null==t?void 0:t.placement),this.setTheme(null==t?void 0:t.theme),this.enableTimers(null==t?void 0:t.enableTimers),this.enableQueue(null==t?void 0:t.enableQueue)}static setMaxCount(t){null!==t&&(t>0?this.maxToastCount=t:console.error("The maximum number of toasts must be greater than 0. Reverting to default."))}static setPlacement(t){switch(TOAST_CONTAINER.className="toast-container position-fixed",t){case TOAST_PLACEMENT.TOP_LEFT:TOAST_CONTAINER.classList.add("top-0","start-0");break;case TOAST_PLACEMENT.TOP_CENTER:TOAST_CONTAINER.classList.add("top-0","start-50","translate-middle-x");break;case TOAST_PLACEMENT.TOP_RIGHT:TOAST_CONTAINER.classList.add("top-0","end-0");break;case TOAST_PLACEMENT.MIDDLE_LEFT:TOAST_CONTAINER.classList.add("top-50","start-0","translate-middle-y");break;case TOAST_PLACEMENT.MIDDLE_CENTER:TOAST_CONTAINER.classList.add("top-50","start-50","translate-middle");break;case TOAST_PLACEMENT.MIDDLE_RIGHT:TOAST_CONTAINER.classList.add("top-50","end-0","translate-middle-y");break;case TOAST_PLACEMENT.BOTTOM_LEFT:TOAST_CONTAINER.classList.add("bottom-0","start-0");break;case TOAST_PLACEMENT.BOTTOM_CENTER:TOAST_CONTAINER.classList.add("bottom-0","start-50","translate-middle-x");break;case TOAST_PLACEMENT.BOTTOM_RIGHT:TOAST_CONTAINER.classList.add("bottom-0","end-0");break;default:TOAST_CONTAINER.classList.add("top-0","end-0")}}static setTheme(t=null){let e=TOAST_TEMPLATE.querySelector(".toast-header"),T=e.querySelector(".btn-close");switch(t){case TOAST_THEME.LIGHT:TOAST_TEMPLATE.style.backgroundColor="var(--body-bg-color-light)",TOAST_TEMPLATE.style.color="var(--text-color-light)",e.style.backgroundColor="var(--header-bg-color-light)",e.style.color="var(--header-color-light)",T.style.filter="unset";break;case TOAST_THEME.DARK:TOAST_TEMPLATE.style.backgroundColor="var(--body-bg-color-dark)",TOAST_TEMPLATE.style.color="var(--text-color-dark)",e.style.backgroundColor="var(--header-bg-color-dark)",e.style.color="var(--header-color-dark)",T.style.filter="invert(1) grayscale(100%) brightness(200%)";break;default:TOAST_TEMPLATE.removeAttribute("style"),e.removeAttribute("style"),T.removeAttribute("style")}}static enableTimers(t){this.timersEnabled=t}static enableQueue(t=!0){this.queueEnabled=t,t||(this.queue=[])}static create(t){let e=TOAST_TEMPLATE.cloneNode(!0);if(e.querySelector(".toast-title").innerText=t.title,e.querySelector(".toast-body").innerHTML=t.message,this.setStatus(e,t.status),this.currentToastCount>=this.maxToastCount){if(!this.queueEnabled)return;const T={toast:e,timeout:t.timeout};return void this.queue.push(T)}const T={toast:e,timeout:t.timeout};this.render(T)}static setStatus(t,e){let T=t.querySelector(".status-icon");switch(e){case TOAST_STATUS.SUCCESS:T.classList.add("text-success","bi-check-circle-fill");break;case TOAST_STATUS.DANGER:T.classList.add("text-danger","bi-x-circle-fill"),t.setAttribute("role","alert"),t.setAttribute("aria-live","assertive");break;case TOAST_STATUS.WARNING:T.classList.add("text-warning","bi-exclamation-circle-fill"),t.setAttribute("role","alert"),t.setAttribute("aria-live","assertive");break;case TOAST_STATUS.INFO:T.classList.add("text-info","bi-info-circle-fill");break;default:T.classList.add("d-none")}}static render(t){t.timeout>0&&(t.toast.setAttribute("data-bs-delay",t.timeout.toString()),t.toast.setAttribute("data-bs-autohide","true")),this.renderTimer(t),TOAST_CONTAINER.appendChild(t.toast);new window.bootstrap.Toast(t.toast).show(),this.currentToastCount++,t.toast.addEventListener("hidden.bs.toast",(()=>{if(TOAST_CONTAINER.removeChild(t.toast),this.currentToastCount--,this.queueEnabled&&this.queue.length>0&&this.currentToastCount<this.maxToastCount){const t=this.queue.shift();this.render(t)}}))}static renderTimer(t){let e=t.toast.querySelector(".timer");switch(this.timersEnabled){case TOAST_TIMERS.ELAPSED:{e.innerText="";let T=1,s=setInterval((()=>{e.innerText=``,T++}),6e4);t.toast.addEventListener("hidden.bs.toast",(()=>{clearInterval(s)}));break}case TOAST_TIMERS.COUNTDOWN:if(t.timeout>0){let T=t.timeout/1e3;e.innerText=`${T}s`;let s=setInterval((()=>{e.innerText=T-1+"s",T--}),1e3);t.toast.addEventListener("hidden.bs.toast",(()=>{clearInterval(s)}));break}default:t.toast.querySelector(".toast-header").removeChild(e);break}}static oldConfigure(t=null,e=TOAST_PLACEMENT.TOP_RIGHT,T=null,s=!0){const a={maxToasts:t,placement:e,theme:T,enableTimers:s?TOAST_TIMERS.ELAPSED:TOAST_TIMERS.DISABLED};this.configure(a)}static oldCreate(t,e,T=0,s=0){const a={title:t,message:e,status:T,timeout:s};this.create(a)}static oldEnableTimers(t){this.timersEnabled=t?TOAST_TIMERS.ELAPSED:TOAST_TIMERS.DISABLED}}Toast.maxToastCount=4,Toast.currentToastCount=0,Toast.timersEnabled=TOAST_TIMERS.ELAPSED,Toast.queueEnabled=!0,Toast.queue=[];